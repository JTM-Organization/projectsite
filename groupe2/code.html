<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
<link rel="shortcut icon" href="img/favicon.ico">
    <title>Code</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <img src="img/icone.png" alt="icone" height="70">
        <h2 class="navbar-brand active">Bataille Navale</h2>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav ml-auto">
            <a class="nav-item nav-link" href="histoire.html">Histoire</a>
            <a class="nav-item nav-link" href="manuel.html">Manuel</a>
            <a class="nav-item nav-link" href="regles.html">Regles</a>
            <a class="nav-item nav-link" href="code.html">Code</a>
          </div>
      </nav>
    <div class="h1">
      Le code du projet
    </div>
<div class="container">
            <p>Nous allons expliquer certaines fonctions qui peuvent paraître difficile à comprendre au premier coup d'oeil.</p>
<p>
La première fonction que nous allons présenter est start(). 
<figure><img src="img/code1.png" alt="code1"></figure>
<p>
Ce n'est pas une grosse fonction mais chaque élément qu'elle définie est utilisé dans une autre partie du code
et nous avons donc pensé qu'il était important de l'expliciter.
Dans un premier temps nous créons 100 boutons dans une double boucle d'indice i et j avec un indice k égal à i*10+j ce qui correspond à l'indice de ligne plus l'indice de colonne.
Ils font tous appel à la fonction tirerJoueur(k) que nous expliquerons en second.
Chaque bouton est ajouté à la liste L1 à l'indice k. Ce sera la liste de boutons qui nous permettra de les manipuler à partir de leur indice car ils n'ont pas de nom.
Pendant cette double boucle nous créons également le plateau de la page de placement. tag_lower(l) met le rectangle en second plan ce qui 
permettra de placer les bateaux au dessus des traits ce qui est plus joli.
Dans la boucle d'indice i nous avons une boucle d'indice k permettant de créer les lettres et numéros des plateaux dans la page de jeu. 
Ces lettres et numéros désignent les coordonnées des cases comme pour le jeu d'échecs.
Une fois sorti de la double boucle nous créons les 5 bateaux que nous mettons ensuite dans une liste globale afin de faciliter le reste du code.
Nous créons ensuite 2 labels pour indiquer quel plateau est au joueur et quel plateau est à l'adversaire.
</p><p>
La deuxième fonction que nous allons présenter est tirJoueur(k) et les fonctions associées. </p>
<figure><img src="img/code2.png" alt="code2"></figure>
<p>
C'est la fonction qui permet au joueur tirer quand 
il appuie sur une des cases du plateau de l'adversaire. Le paramètre k représente le numéro du bouton.
On cherche ensuite sa position dans la matrice M2 qui représente la matrice de l'adversaire. 
Le résultat de k%10 donne l'indice de ligne et le résultat de k//10 donne l'indice de colonne. 
Avec ces 2 indices on trouve la case du bouton sur laquelle on va intéragir.
Si la case vaut 0 c'est une case d'eau. 
On met alors sa valeur à 42 car c'est une valeur non utilisée dans le programme et que nous aimons la référence à H2G2 le guide du voyageur intergalactique.
Ensuite nous détruisons le bouton numéro k de la liste de bouton que nous avons créé dans start.
Puis, afin de faciliter le code, nous définissons x et y comme les coordonnées en haut à gauche du bouton sur lequel on a cliqué. 
On multiplie donc les indices par la taille pour obtenir ce x et ce y.
Ensuite si la case sur laquelle nous avons cliqué n'était pas une case d'eau on enlève 1 au nombre de cases du bateau touché dans listeCompteur 
grâce au numéro dans la matrice car chaque bateau a un numéro qui lui est propre allant de 1 à 5. On crée ensuite un rectangle à l'emplacement du bouton détruit.
Si le bateau n'est pas détruit (s'il reste plus de 0 case de bateau dans listeCompteur à l'indice du bateau) on met un label "touché". 
Sinon on met un label "touché coulé" afin de prévenir le joueur. On enlève ensuite 1/17 de sa taille à la progresBar représentant les points de vie de l'ordinateur.
On retire ensuite 1 au total de cases de bateau du bot ce qui équivaut à retirer 1 à victoireJoueur. Si il reste 0 case on appelle la fonction victoire avec 
comme paramètres "joueur" ce qui permet de modifier le label sur l'écran de victoire.
Les labels suivants sont juste des statistiques permettant au joueur de connaître ses performances.
Après tout celà c'est au tour de l'ordinateur de jouer. On appelle donc une fonction différente en fonction de la difficulté.
Avant d'expliquer les fonctions de tir de l'ordinateur il faut expliquer la fonction tirIaCode(ordonnee,abscisse) qui s'occupe de vérifier si le tir est valide et de changer
les variables qui doivent être changé quand le tir est valide.</p>
<figure><img src="img/code5.png" alt="code5"></figure>
<p>
Elle prend 2 paramètres qui sont la ligne et la colonne sur laquelle l'ordinateur tente de tirer. Si la case dans la matrice M1 (la matrice d'état du plateau du joueur)
est égale à 0 c'est de l'eau. On change alors la valeur de la case par une valeur inutilisée dans le reste du code puis on change le label annonçant le tire.
Si la case n'est pas de l'eau, que c'est n'est pas une case d'eau déjà touchée et que ce n'est pas une case de bateau déjà touchée alors c'est une case de bateau.
Dans ce cas on suit le même procédé que quand le joueur touche, c'est à dire qu'on réduit la valeur du bateau dans listeCompteur, qu'on change les labels, qu'on réduit la barre
de points de vie et qu'on réduit de 1 victoireBot.
Si victoireBot est égal à 0 on appelle victoire avec "bot" en paramètre ce qui met fin à la partie.
A chaque fois qu'on teste la valeur de la case, si un test est réussi on change flag à false. C'est la variable qui vérifie si le tir est valide.
A la fin du code on la retourne ce qui va permettre de changer la valeur du flag de la boucle while des tir de l'ordinateur pour quitter la boucle.
La fonction tirIaFacile() est la plus basique. </p>
<figure><img src="img/code3.png" alt="code3"></figure>
<p>
Elle permet de tirer aléatoirement sur le plateau du joueur. Pour ce faire on défini un flag qui restera vrai tant que le tir
n'aura pas été validé. Dans cette boucle while nous créons x et y avec des valeurs aléatoires de 0 à 9 puis nous appelons tirIaCode(x,y) afin de tirer.
Les autres variables diffères seulement dans le fait que certaines fois à la place de tirer aléatoirement elles tirent forcément sur une case. 
Pour ce faire au lieu de choisir des valeurs aléatoires et d'invoquer la chance nous regardons juste la matrice jusqu'à trouver une case de bateau sur laquelle nous tirons.</p>
<figure><img src="img/code4.png" alt="code4"></figure>


    </div>
    <div class="footer-basic">
       <footer>
           <ul class="list-inline">
               <li class="list-inline-item"><a href="#"> A propos</a></li>
               <li class="list-inline-item"><a href="confidentialite.html">Confidentialite</a></li>
                 <li class="list-inline-item"><a href="contact.html">Contact</a></li>
               <section class="mb-4">
               <a class="btn btn-primary btn-floating m-1" style="background-color: white;"href="https://github.com/JTM-Organization"role="button"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">
  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
</svg></a>
               </section>
           </ul>
           <p class="copyright">JTM-Organization 2022 © -Tous droits reservés </p>
       </footer>
   </div>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>
